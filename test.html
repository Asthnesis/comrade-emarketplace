<!DOCTYPE html>
<html>
<head>
  <title>Product Cards</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="product-container">
    {% for product in products %}
      <div class="product-card">
        <img src="data:image/jpeg;base64,{{ product.product_image }}" alt="Product Image">
        <a href="#"><h6>{{product.seller_id}}</h4></a>
        <h2>{{ product.prod_name }}</h2>
        <p>Price: ${{ product.price }}</p>
        <div class="product-actions">
          <button class="cart-btn" data-product-id="{{ product.id }}">
            <i class="bi-cart-fill me-1"></i> Cart (<span class="cart-count">0</span>)
          </button>
          <button class="favorite-btn" data-product-id="{{ product.id }}">
            <i class="bi bi-heart-fill me-1"></i> Favorite (<span class="favorite-count">0</span>)
          </button>
        </div>
        <button class="card-button">View More details</button>
      </div>
    {% endfor %}
  </div>

  <script>
    const cartBtns = document.querySelectorAll('.cart-btn');
    const favoriteBtns = document.querySelectorAll('.favorite-btn');

    cartBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const productId = btn.dataset.productId;
        // Simulate adding to cart (replace with actual logic)
        let currentCartCount = parseInt(btn.querySelector('.cart-count').textContent, 10);
        currentCartCount++;
        btn.querySelector('.cart-count').textContent = currentCartCount;

        // Consider sending AJAX request to a server-side cart adding route if needed
      });
    });

    favoriteBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const productId = btn.dataset.productId;
        // Simulate adding to favorites (replace with actual logic)
        let currentFavoriteCount = parseInt(btn.querySelector('.favorite-count').textContent, 10);
        currentFavoriteCount++;
        btn.querySelector('.favorite-count').textContent = currentFavoriteCount;

        // Consider sending AJAX request to a server-side favorites adding route if needed
      });
    });
  </script>
</body>
</html>
